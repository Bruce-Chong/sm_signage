<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Science Matters — Slideshow → Video</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    html, body {
      margin: 0;
      height: 100%;
      background: #000; /* clean fade between segments */
    }
    .stage {
      position: fixed;
      inset: 0;
      display: grid;
      place-items: center;
      background: #000;
    }
    .hidden { display: none; }

    /* Make both iframe and video fill the screen */
    iframe, video {
      width: 100vw;
      height: 100vh;
      border: 0;
      object-fit: cover;
      background: #000;
    }
  </style>
</head>
<body>
  <!-- STAGE 1: Google Slides -->
  <div id="slidesStage" class="stage">
    <iframe
      id="slidesFrame"
      src="https://docs.google.com/presentation/d/e/2PACX-1vRZVITow9z28ok6mLfy0WHQkMjB7OTUOkkxbHslHLETin6UgO8g8sAmqymW3OJwLN5S59PrSB_PX-Ew/pub?start=true&loop=true&delayms=10000"
      allow="autoplay; fullscreen"
      referrerpolicy="no-referrer"
    ></iframe>
  </div>

  <!-- STAGE 2: Video -->
  <div id="videoStage" class="stage hidden">
    <video
      id="promoVideo"
      playsinline
      muted
      preload="auto"
      /* remove autoplay if you want audio and will click to start */
      autoplay
    >
      <source src="assets/fishesSM.mp4" type="video/mp4">
      Your browser does not support the video tag.
    </video>
  </div>

  <script>
    // === CONFIG ===
    // How long to show the slideshow before switching to video (ms).
    // Change this to the exact duration you want.
    const SLIDESHOW_DURATION_MS = 50000; // 2 minutes

    // Whether to loop back to slides after the video finishes
    const LOOP_BACK_TO_SLIDES = true;

    // === LOGIC ===
    const slidesStage = document.getElementById('slidesStage');
    const videoStage  = document.getElementById('videoStage');
    const videoEl     = document.getElementById('promoVideo');

    function showVideo() {
      slidesStage.classList.add('hidden');
      videoStage.classList.remove('hidden');

      // Try to start video programmatically (helps on kiosks)
      const p = videoEl.play();
      if (p && typeof p.then === 'function') {
        p.catch(() => {
          // Autoplay might be blocked if unmuted; we set muted to true above to allow autoplay.
          // If you want audio: remove "autoplay" and keep "muted" false, then tap/click to play.
          console.log('Autoplay blocked — user interaction required if unmuted.');
        });
      }
    }

    // Switch from slides to video after the configured time
    setTimeout(showVideo, SLIDESHOW_DURATION_MS);

    // When the video ends, optionally go back to slides (kiosk loop)
    videoEl.addEventListener('ended', () => {
      if (LOOP_BACK_TO_SLIDES) {
        videoStage.classList.add('hidden');
        slidesStage.classList.remove('hidden');
        // Start counting again
        setTimeout(showVideo, SLIDESHOW_DURATION_MS);
      }
    });
  </script>
</body>
</html>
